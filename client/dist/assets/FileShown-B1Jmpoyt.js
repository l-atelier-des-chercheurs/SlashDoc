import{n,_ as s}from"../build.js";const a={props:{file:Object,context:String,position:String,can_edit:Boolean},components:{CropAdjustMedia:()=>s(()=>import("./CropAdjustMedia-SaN7JGGF.js"),[]),OptimizeMedia:()=>s(()=>import("./OptimizeMedia-D6rIJRsb.js"),[])},data(){return{show_infos:!0,is_dragged:!1,edit_mode:!1,is_regenerating:!1,show_cropadjust_modal:!1}},i18n:{messages:{fr:{description_of_media:"Description du média",origin_of_media:"Provenance du média"},en:{description_of_media:"Media description",origin_of_media:"Media origin"}}},created(){localStorage.getItem("show_infos")?this.show_infos=localStorage.getItem("show_infos")!=="false":this.show_infos=this.can_edit||this.has_caption||this.has_credits||this.has_bibliography},mounted(){this.$eventHub.$on("fileshown.showInfos",this.showInfos),this.$eventHub.$on("fileshown.hideInfos",this.hideInfos)},beforeDestroy(){this.$eventHub.$off("fileshown.showInfos",this.showInfos),this.$eventHub.$off("fileshown.hideInfos",this.hideInfos)},watch:{show_infos(){localStorage.setItem("show_infos",this.show_infos)}},computed:{has_caption(){var e;return this.hasText((e=this.file)==null?void 0:e.caption)},has_credits(){var e;return this.hasText((e=this.file)==null?void 0:e.$credits)},has_bibliography(){var e;return this.hasText((e=this.file)==null?void 0:e.bibliography)},optimization_possible(){return this.fileCanBeOptimized({path:this.file.$media_filename})},optimization_strongly_recommended(){return this.fileShouldBeOptimized({path:this.file.$media_filename})},cropadjust_possible(){return this.file.$type==="image"&&!this.file.$media_filename.endsWith(".gif")}},methods:{hasText(e){return e==null?!1:String(e).trim().length>0},async regenerateThumbs(){this.is_regenerating=!0,await this.$api.regenerateThumbs({path:this.file.$path}),this.is_regenerating=!1},showInfos(){this.show_infos=!0},hideInfos(){this.show_infos=!1}}};var r=function(){var t=this,i=t._self._c;return i("div",{staticClass:"_fileShown"},[i("transition",{attrs:{name:"pagechange",mode:"out-in"}},[t.file?i("div",{key:t.file.$path,staticClass:"_single",attrs:{"data-type":t.file.$type}},[t.file.$type==="text"?i("div",{staticClass:"_textEditor2"},[i("CollaborativeEditor3",{attrs:{path:t.file.$path,content:t.file.$content,custom_formats:["bold","italic","underline","link"],can_edit:t.can_edit,mode:t.context==="chutier"?"edit_on_mounted":"normal"}})],1):i("MediaContent",{attrs:{file:t.file,context:"full",resolution:1600,show_fs_button:!0,zoom_on_click:!1}}),t.position?i("div",{staticClass:"_navArrow"},[i("button",{staticClass:"u-button u-button_icon u-button_transparent",attrs:{type:"button",disabled:t.position==="alone"||t.position==="first"},on:{click:function(o){return t.$eventHub.$emit("carousel.prev")}}},[i("b-icon",{attrs:{icon:"arrow-left-short"}})],1),i("button",{staticClass:"u-button u-button_icon u-button_transparent",attrs:{type:"button",disabled:t.position==="alone"||t.position==="last"},on:{click:function(o){return t.$eventHub.$emit("carousel.next")}}},[i("b-icon",{attrs:{icon:"arrow-right-short"}})],1),t.cropadjust_possible?i("button",{staticClass:"u-button u-button_icon u-button_small u-button_glass _cropAdjustBtn",attrs:{type:"button"},on:{click:function(o){t.show_cropadjust_modal=!0}}},[i("b-icon",{attrs:{icon:"bounding-box"}})],1):t._e()]):t._e(),t.file.$thumbs==="no_preview"?i("button",{staticClass:"u-buttonLink _regenerateBtn",attrs:{type:"button"},on:{click:t.regenerateThumbs}},[t.is_regenerating?i("LoaderSpinner"):[i("b-icon",{attrs:{icon:"arrow-clockwise"}}),t._v(" "+t._s(t.$t("regenerate_thumbs"))+" ")]],2):t._e(),i("div",{staticClass:"_dragEditBtn"},[i("DragFile",{attrs:{file:t.file,is_dragged:t.is_dragged},on:{"update:is_dragged":function(o){t.is_dragged=o}}})],1)],1):t._e()]),i("div",{staticClass:"_unfoldBtn"},[i("button",{staticClass:"u-button u-button_icon u-button_transparent",attrs:{type:"button"},on:{click:function(o){t.show_infos=!t.show_infos}}},[t.show_infos?i("b-icon",{attrs:{icon:"chevron-down","aria-label":t.$t("close")}}):i("b-icon",{attrs:{icon:"chevron-up","aria-label":t.$t("open")}})],1)]),i("transition",{attrs:{name:"pagechange",mode:"out-in"}},[t.show_infos?i("div",{key:t.file.$path,staticClass:"_infos"},[i("div",{staticClass:"_infos--content"},[i("div",{staticClass:"_captionCreditContainer"},[i("div",{staticClass:"_captionCreditItem"},[i("h4",{domProps:{textContent:t._s(t.$t("description_of_media"))}}),t.file.$type==="url"?i("div",{staticClass:"u-spacingBottom"},[i("DLabel",{staticClass:"_label",attrs:{str:t.$t("link")}}),i("div",[i("a",{attrs:{href:t.file.$content,target:"_blank"}},[t._v(" "+t._s(t.file.$content)+" ")])])],1):t._e(),i("div",{staticClass:"u-spacingBottom"},[i("DLabel",{attrs:{str:t.$t("caption"),icon_name:"text-left"}}),i("TextEditor",{attrs:{field_to_edit:"caption",content:t.file.caption,path:t.file.$path,placeholder:"",custom_formats:["bold","italic","link"],maxlength:1280,can_edit:t.can_edit}})],1)]),i("div",{staticClass:"_captionCreditItem"},[i("h4",{domProps:{textContent:t._s(t.$t("origin_of_media"))}}),i("DLabel",{attrs:{str:t.$t("credit"),icon_name:"c-circle"}}),i("TextEditor",{attrs:{field_to_edit:"$credits",content:t.file.$credits,path:t.file.$path,placeholder:"",custom_formats:["bold","italic","link"],maxlength:1280,can_edit:t.can_edit}}),i("DLabel",{attrs:{str:t.$t("bibliography"),icon_name:"bookmark"}}),i("TextEditor",{attrs:{field_to_edit:"bibliography",content:t.file.bibliography,path:t.file.$path,placeholder:"",custom_formats:["bold","italic","link"],maxlength:1280,can_edit:t.can_edit}})],1)]),t.show_cropadjust_modal?i("CropAdjustMedia",{attrs:{media:t.file},on:{close:function(o){return t.$emit("close")}}}):t._e(),t.optimization_strongly_recommended||t.optimization_possible?i("OptimizeMedia",{attrs:{media:t.file},on:{close:function(o){return t.$emit("close")}}}):t._e(),(t.file.$location,t._e())],2)]):t._e()])],1)},l=[],_=n(a,r,l,!1,null,"a551b521");const d=_.exports;export{d as F};
